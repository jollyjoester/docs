.. _user_management:

===============================
User Management
===============================

.. rst-class:: right-menu


Below are Monaca Backend Management APIs for Users. 


======================================== ================================================================================================================
Method                                    Description
======================================== ================================================================================================================
:ref:`User.list()<u_list>`                Get a List of Users
:ref:`User.create()<u_create>`            Create a New User Object
:ref:`User.get()<u_get>`                  Get a User's Data
:ref:`User.update()<u_update>`            Update a User's Data
:ref:`User.delete()<u_delete>`            Delete Users
:ref:`User.getPropertyNames()<u_getPN>`   Get Users' Property Names
======================================== ================================================================================================================

.. rst-class:: function-reference

.. _u_list:

User.list - Get a List of Users
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Get a list of users in a User collection.

:dfn:`User.list`

Parameter
  ======================== ================== ==========================================================================================================================
  ``page``                  number             Page number (starting from 1)
  ``itemsInPage``           number             Number of items to display on one page. The maximum number of items can be up to ``10000``.
  ``sortProperty``          string             Property to be used for sorting
  ``sortOrder``             string             Sorting order ``"asc"`` or ``"desc"`` (Default: ``"asc"``)
  ``propertyNames``         string             Properties to fetch in addition to system properties (optional)
  ``nameFilter``            string             Search users by ``_username`` or ``_oid`` with this keyword (optional)
  ``userQuery``             string             Filter target users by a :ref:`MonaQL<MonaQL>` query for user properties. (Optional)
                                     
                                               **e.g.** 'country == "US" && age > 20' 

  ``userQueryBindParams``    array             Replace the placeholders in userQuery by its values. (Optional)
                                     
                                               **e.g.** ["US", 20] when userQuery is 'country == ? && age > ?'

  ======================== ================== ==========================================================================================================================

Return Value
  ================ ======================================================================================================================================
  ``items``         Items returned
  ``totalItems``    Number of items
  ================ ======================================================================================================================================

Error Code
  Errors are returned as :doc:`../cloud/error` object.

  ============== ========================================================================================================================================
  ``-32602``      Invalid params
  ============== ========================================================================================================================================

.. rst-class:: function-reference

.. _u_create:

User.create - Create a new User Object
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Create a new User object.

:dfn:`User.create`

Parameter
  =============== ======== ============================================================================================================================
  ``username``     string   Username or email address
  ``password``     string   Password
  ``properties``   object   Additional user properties to set
  =============== ======== ============================================================================================================================

Return Value
  ========== ============================================================================================================================================
  ``user``     User data (with ``_id``)
  ========== ============================================================================================================================================

Error Code
  Errors are returned as :doc:`../cloud/error` object.

  ============ ==========================================================================================================================================
  ``-32602``     Invalid params
  ============ ==========================================================================================================================================


.. rst-class:: function-reference

.. _u_get:

User.get - Get a User Data
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Get a User's data.

:dfn:`User.get`

Parameter
  ========= ======== ====================================================================================================================================
  ``_id``    string   User's id
  ========= ======== ====================================================================================================================================

Return Value
  =========== ===========================================================================================================================================
  ``user``     User data
  =========== ===========================================================================================================================================

Error Code
  Errors are returned as :doc:`../cloud/error` object.

  ============ ==========================================================================================================================================
  ``-32602``    Invalid params
  ============ ==========================================================================================================================================

.. rst-class:: function-reference

.. _u_update:

User.update - Update a User Data
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Update a User's data.

:dfn:`User.update`

Parameter
  ========== ========= ==================================================================================================================================
  ``_id``     string    User's id
  ``user``              User data (``_id`` column will be ignored)
  ========== ========= ==================================================================================================================================

Return Value
  ========================= =============================================================================================================================
  ``None``
  ========================= =============================================================================================================================

Errors Code
  Errors are returned as :doc:`../cloud/error` object.

  =========== ===========================================================================================================================================
  ``-32602``   Invalid params
  =========== ===========================================================================================================================================


.. rst-class:: function-reference

.. _u_delete:

User.delete - Delete Users
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Delete multiple Users.

:dfn:`User.delete`

Parameter
  ============= ========= ===============================================================================================================================
  ``idList``     Object    id list
  ============= ========= ===============================================================================================================================

Return Value
  ========================= =============================================================================================================================
  ``None``
  ========================= =============================================================================================================================

Errors Code
  Errors are returned as :doc:`../cloud/error` object.

  ============ ==========================================================================================================================================
  ``-32602``    Invalid params
  ============ ==========================================================================================================================================

.. rst-class:: function-reference

.. _u_getPN:

User.getPropertyNames - Get Users' Property Names
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Get displayable property names by internally fetching the latest *100* users.

:dfn:`User.getPropertyNames`

Parameter
  ========================= =============================================================================================================================
  ``None``
  ========================= =============================================================================================================================

Return Value
  =========== ======== ==================================================================================================================================
  ``names``    array    Property names.
  =========== ======== ==================================================================================================================================

Errors Code
  ========================= =============================================================================================================================
  ``N/A``
  ========================= =============================================================================================================================


.. seealso::

  *See Also*

  - :ref:`User API<user_api>`
  - :ref:`backend_control_panel`
  - :ref:`backend_api_index`
  - :ref:`backend_database_memo`
  - :ref:`backend_management_api_index`
  - :ref:`backend_management_api_key`